<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <title>topicSelection</title>
    <style>
        .topicTitle{

           font-color: dimgray;
            font-size: larger;
            border-style: solid;
            border-radius: 12px;
            border-color: dimgray;
            padding: 5px;
        }
        topic {
            float: left;
            width: 25%;
            text-align: center;
            padding: 5px;
            border-style: solid;
            border-color: dimgray;
            border-radius: 12px;
            height: 500px;

        }

        ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #333;
        }

        li a {
            display: block;
            color: white;
            text-align: center;
            padding: 14px 16px;
            text-decoration: none;
            float: right;
        }

        li a:hover {
            background-color: #111;
        }
    </style>
    <link rel="shortcut icon" href="/client/favicon.ico" type="image/x-icon">
    <script src="/client/js/jquery-3.3.1.min.js"></script>
    <script src="/client/js/popper.min.js"></script>
    <script src="/client/js/bootstrap.min.js"></script>
    <script src="/client/js/js.cookie.min.js"></script>
    <script src="/client/js/querystring.js"></script>
    <link href="/client/css/bootstrap.min.css" rel="stylesheet">
    <script>
        function pageLoad() {
            getTopicList();

        }

        function getTopicList() {
            console.log("Invoked getTopicList() ");

            $.ajax({
                type: "GET",
                url: "/topic/list",
                success: response => {
                    if (response.toString().startsWith('Error:')) {
                        alert(response);
                    } else {
                        formatTopicList(response);
                    }
                }
            });
        }

        function formatTopicList(data) {
            console.log(data);
            let dataHTML ="";
            for (let item of data) {
                dataHTML += `<div class="topic"><span class="topicTitle"> ${item.topic}</span> <br>` + `<br></br>` +
                    `${item.topicDescription} <button class="goToTopic btn btn-primary" data-topic="${item.topic}">Go to Quizzes</button></div>` + `<br></br>`;
            }
            $('#topicList').html(dataHTML);

            $(".goToTopic").click(event => {
                const topic = $(event.target).attr('data-topic');  //from the click event, get the topic
                sessionStorage.setItem("topic", topic);
                window.open("topic.html", "_self");
            });

        }


    </script>
</head>

<body onload="pageLoad();">
<ul>
    <li><a class="active" href="login.html">Logout</a></li>
    <li><a href="topicSelection.html">Topics</a></li>
    <li><a href="profileOverview.html">Profile</a></li>
    <li><a href="index.html">Home</a></li>
    <p><font color="white">A-level Computer Science Coursework</font></p>
</ul>

<div id="topicList"></div>


</body>
</html>
